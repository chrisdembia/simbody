<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Simbody: Geo.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simbody
   &#160;<span id="projectnumber">3.4 (development)</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('Geo_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Geo.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Geo_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef SimTK_SIMMATH_GEO_H_</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define SimTK_SIMMATH_GEO_H_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="comment">/* -------------------------------------------------------------------------- *</span>
<a name="l00005"></a>00005 <span class="comment"> *                        Simbody(tm): SimTKmath                              *</span>
<a name="l00006"></a>00006 <span class="comment"> * -------------------------------------------------------------------------- *</span>
<a name="l00007"></a>00007 <span class="comment"> * This is part of the SimTK biosimulation toolkit originating from           *</span>
<a name="l00008"></a>00008 <span class="comment"> * Simbios, the NIH National Center for Physics-Based Simulation of           *</span>
<a name="l00009"></a>00009 <span class="comment"> * Biological Structures at Stanford, funded under the NIH Roadmap for        *</span>
<a name="l00010"></a>00010 <span class="comment"> * Medical Research, grant U54 GM072970. See https://simtk.org/home/simbody.  *</span>
<a name="l00011"></a>00011 <span class="comment"> *                                                                            *</span>
<a name="l00012"></a>00012 <span class="comment"> * Portions copyright (c) 2011-12 Stanford University and the Authors.        *</span>
<a name="l00013"></a>00013 <span class="comment"> * Authors: Michael Sherman                                                   *</span>
<a name="l00014"></a>00014 <span class="comment"> * Contributors:                                                              *</span>
<a name="l00015"></a>00015 <span class="comment"> *                                                                            *</span>
<a name="l00016"></a>00016 <span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may    *</span>
<a name="l00017"></a>00017 <span class="comment"> * not use this file except in compliance with the License. You may obtain a  *</span>
<a name="l00018"></a>00018 <span class="comment"> * copy of the License at http://www.apache.org/licenses/LICENSE-2.0.         *</span>
<a name="l00019"></a>00019 <span class="comment"> *                                                                            *</span>
<a name="l00020"></a>00020 <span class="comment"> * Unless required by applicable law or agreed to in writing, software        *</span>
<a name="l00021"></a>00021 <span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,          *</span>
<a name="l00022"></a>00022 <span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.   *</span>
<a name="l00023"></a>00023 <span class="comment"> * See the License for the specific language governing permissions and        *</span>
<a name="l00024"></a>00024 <span class="comment"> * limitations under the License.                                             *</span>
<a name="l00025"></a>00025 <span class="comment"> * -------------------------------------------------------------------------- */</span>
<a name="l00026"></a>00026 
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="SimTKcommon_8h.html" title="Includes internal headers providing declarations for the basic SimTK Core classes, including Simmatrix.">SimTKcommon.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="SimTKmath_2include_2simmath_2internal_2common_8h.html" title="This is the header file that every Simmath compilation unit should include first.">simmath/internal/common.h</a>&quot;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;cassert&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">namespace </span>SimTK {
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="comment">//==============================================================================</span>
<a name="l00040"></a>00040 <span class="comment">//                                    GEO</span>
<a name="l00041"></a>00041 <span class="comment">//==============================================================================</span>
<a name="l00053"></a><a class="code" href="classSimTK_1_1Geo.html">00053</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="SimTKmath_2include_2simmath_2internal_2common_8h.html#a5696280cbb2e30d11fd3755c78efc519">SimTK_SIMMATH_EXPORT</a> <a class="code" href="classSimTK_1_1Geo.html" title="The Geo class collects geometric primitives intended to deal with raw, fixed-size geometric shapes oc...">Geo</a> {
<a name="l00054"></a>00054 <span class="keyword">public</span>:
<a name="l00055"></a>00055 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1Point__.html" title="A 3d point primitive represented by a Vec3 from the origin of an unspecified frame, and a collection of point-related utility methods.">Point_</a>;
<a name="l00056"></a>00056 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1Sphere__.html" title="A geometric primitive representing a sphere by its radius and center point, and a collection of spher...">Sphere_</a>;
<a name="l00057"></a>00057 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1LineSeg__.html" title="A 3d line segment primitive represented by its end points in an unspecified frame, and a collection of line segment-related utility methods.">LineSeg_</a>;
<a name="l00058"></a>00058 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span>Line_;
<a name="l00059"></a>00059 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span>Plane_;
<a name="l00060"></a>00060 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span>Circle_;
<a name="l00061"></a>00061 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1Box__.html" title="A 3d rectangular box aligned with an unspecified frame F and centered at that frame&#39;s origin...">Box_</a>;
<a name="l00062"></a>00062 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1AlignedBox__.html" title="A 3d box aligned with an unspecified frame F and centered at a given point measured from that frame&#39;s...">AlignedBox_</a>;
<a name="l00063"></a>00063 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1OrientedBox__.html" title="TODO: A 3d box oriented and positioned with respect to an unspecified frame F.">OrientedBox_</a>;
<a name="l00064"></a>00064 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1Triangle__.html" title="A geometric primitive representing a triangle by its vertices as points in some unspecified frame...">Triangle_</a>;
<a name="l00065"></a>00065 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1CubicHermiteCurve__.html" title="A primitive useful for computations involving a single cubic Hermite curve segment in algebraic or ge...">CubicHermiteCurve_</a>;
<a name="l00066"></a>00066 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1BicubicHermitePatch__.html" title="A primitive useful for computations involving a single bicubic Hermite patch.">BicubicHermitePatch_</a>;
<a name="l00067"></a>00067 <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1CubicBezierCurve__.html" title="This is a primitive useful for computations involving a single cubic Bezier curve segment...">CubicBezierCurve_</a>;
<a name="l00068"></a><a class="code" href="classSimTK_1_1Geo.html#ab97c535710a7081de18ebc4257765022">00068</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classSimTK_1_1Geo_1_1BicubicBezierPatch__.html" title="A primitive useful for computations involving a single bicubic Bezier patch.">BicubicBezierPatch_</a>;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1Point__.html" title="A 3d point primitive represented by a Vec3 from the origin of an unspecified frame, and a collection of point-related utility methods.">Point_&lt;Real&gt;</a>        <a class="code" href="classSimTK_1_1Geo.html#ab97c535710a7081de18ebc4257765022">Point</a>;
<a name="l00071"></a><a class="code" href="classSimTK_1_1Geo.html#a099f600ddc5f23a4abd3e2c1b485a9be">00071</a> <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1Sphere__.html" title="A geometric primitive representing a sphere by its radius and center point, and a collection of spher...">Sphere_&lt;Real&gt;</a>       <a class="code" href="classSimTK_1_1Geo.html#a099f600ddc5f23a4abd3e2c1b485a9be">Sphere</a>;
<a name="l00072"></a><a class="code" href="classSimTK_1_1Geo.html#a166c147f08f611293713999254cd5b66">00072</a> <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1LineSeg__.html" title="A 3d line segment primitive represented by its end points in an unspecified frame, and a collection of line segment-related utility methods.">LineSeg_&lt;Real&gt;</a>      <a class="code" href="classSimTK_1_1Geo.html#a166c147f08f611293713999254cd5b66">LineSeg</a>;
<a name="l00073"></a><a class="code" href="classSimTK_1_1Geo.html#a67b1362912666fdde3db6515f225671b">00073</a> <span class="keyword">typedef</span> Line_&lt;Real&gt;         <a class="code" href="classSimTK_1_1Geo.html#a67b1362912666fdde3db6515f225671b">Line</a>;
<a name="l00074"></a><a class="code" href="classSimTK_1_1Geo.html#a30b9d1294684535d71f6d1fbc441abf2">00074</a> <span class="keyword">typedef</span> Plane_&lt;Real&gt;        <a class="code" href="classSimTK_1_1Geo.html#a30b9d1294684535d71f6d1fbc441abf2">Plane</a>;
<a name="l00075"></a><a class="code" href="classSimTK_1_1Geo.html#af7647fade9679a5810ec7e38d00a30dc">00075</a> <span class="keyword">typedef</span> Circle_&lt;Real&gt;       <a class="code" href="classSimTK_1_1Geo.html#af7647fade9679a5810ec7e38d00a30dc">Circle</a>;
<a name="l00076"></a><a class="code" href="classSimTK_1_1Geo.html#a0e81c3a9b9891a184da06144e6072d02">00076</a> <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1Box__.html" title="A 3d rectangular box aligned with an unspecified frame F and centered at that frame&#39;s origin...">Box_&lt;Real&gt;</a>          <a class="code" href="classSimTK_1_1Geo.html#a0e81c3a9b9891a184da06144e6072d02">Box</a>;
<a name="l00077"></a><a class="code" href="classSimTK_1_1Geo.html#a17b6b4b86608621c35355ae4c50c0cd1">00077</a> <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1AlignedBox__.html" title="A 3d box aligned with an unspecified frame F and centered at a given point measured from that frame&#39;s...">AlignedBox_&lt;Real&gt;</a>   <a class="code" href="classSimTK_1_1Geo.html#a17b6b4b86608621c35355ae4c50c0cd1">AlignedBox</a>;
<a name="l00078"></a><a class="code" href="classSimTK_1_1Geo.html#a48fc5b40db16bf46c904f72dcf682949">00078</a> <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1OrientedBox__.html" title="TODO: A 3d box oriented and positioned with respect to an unspecified frame F.">OrientedBox_&lt;Real&gt;</a>  <a class="code" href="classSimTK_1_1Geo.html#a48fc5b40db16bf46c904f72dcf682949">OrientedBox</a>;
<a name="l00079"></a><a class="code" href="classSimTK_1_1Geo.html#acfe881507d423829c209ae4bbb8ee5b3">00079</a> <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1Triangle__.html" title="A geometric primitive representing a triangle by its vertices as points in some unspecified frame...">Triangle_&lt;Real&gt;</a>     <a class="code" href="classSimTK_1_1Geo.html#acfe881507d423829c209ae4bbb8ee5b3">Triangle</a>;
<a name="l00080"></a><a class="code" href="classSimTK_1_1Geo.html#a221d1da14347f9f63c825760f53c9f97">00080</a> <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1CubicHermiteCurve__.html" title="A primitive useful for computations involving a single cubic Hermite curve segment in algebraic or ge...">CubicHermiteCurve_&lt;Real&gt;</a>    <a class="code" href="classSimTK_1_1Geo.html#a221d1da14347f9f63c825760f53c9f97">CubicHermiteCurve</a>;
<a name="l00081"></a><a class="code" href="classSimTK_1_1Geo.html#ae66df3a039489bdc4b9a350a111bcf85">00081</a> <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1BicubicHermitePatch__.html" title="A primitive useful for computations involving a single bicubic Hermite patch.">BicubicHermitePatch_&lt;Real&gt;</a>  <a class="code" href="classSimTK_1_1Geo.html#ae66df3a039489bdc4b9a350a111bcf85">BicubicHermitePatch</a>;
<a name="l00082"></a><a class="code" href="classSimTK_1_1Geo.html#a5e6852b400457b33038942a8232a305b">00082</a> <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1CubicBezierCurve__.html" title="This is a primitive useful for computations involving a single cubic Bezier curve segment...">CubicBezierCurve_&lt;Real&gt;</a>     <a class="code" href="classSimTK_1_1Geo.html#a5e6852b400457b33038942a8232a305b">CubicBezierCurve</a>;
<a name="l00083"></a><a class="code" href="classSimTK_1_1Geo.html#aa6ac161f679ff70829ff07ef7d632ee9">00083</a> <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1Geo_1_1BicubicBezierPatch__.html" title="A primitive useful for computations involving a single bicubic Bezier patch.">BicubicBezierPatch_&lt;Real&gt;</a>   <a class="code" href="classSimTK_1_1Geo.html#aa6ac161f679ff70829ff07ef7d632ee9">BicubicBezierPatch</a>;
<a name="l00084"></a>00084 
<a name="l00115"></a>00115 <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP, <span class="keywordtype">int</span> S&gt; <span class="keyword">static</span> <span class="keywordtype">bool</span>
<a name="l00116"></a><a class="code" href="classSimTK_1_1Geo.html#a1d4b26dd214be2ce221fd2658dcbd715">00116</a> isCusp(<span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Pu) 
<a name="l00117"></a>00117 {   <span class="keywordflow">return</span> Pu.<a class="code" href="classSimTK_1_1Vec.html#a95575b22850f63eaa64858660c8c8c64">normSqr</a>() &lt; getDefaultTolSqr&lt;RealP&gt;(); }
<a name="l00118"></a>00118 
<a name="l00132"></a>00132 <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP, <span class="keywordtype">int</span> S&gt; <span class="keyword">static</span> <span class="keywordtype">bool</span>
<a name="l00133"></a><a class="code" href="classSimTK_1_1Geo.html#acfdf5d12c423028351bb9d22a5c11391">00133</a> isInflectionPoint(<span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Pu, <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Puu) 
<a name="l00134"></a>00134 { <span class="keywordflow">return</span> (Pu % Puu).normSqr() &lt; getDefaultTolSqr&lt;RealP&gt;(); }
<a name="l00135"></a>00135 
<a name="l00139"></a>00139 <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP, <span class="keywordtype">int</span> S&gt; <span class="keyword">static</span> <a class="code" href="classSimTK_1_1UnitVec.html" title="This class is a Vec3 plus an ironclad guarantee either that:">UnitVec&lt;RealP,1&gt;</a> 
<a name="l00140"></a><a class="code" href="classSimTK_1_1Geo.html#adf1c55e619734a5ccb71e118d69b942c">00140</a> <a class="code" href="classSimTK_1_1Geo.html#adf1c55e619734a5ccb71e118d69b942c" title="Calculate the unit tangent vector t=dP/ds, given Pu=dP/du.">calcUnitTangent</a>(<span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Pu) {
<a name="l00141"></a>00141     <span class="keyword">const</span> RealP dsdu = Pu.<a class="code" href="classSimTK_1_1Vec.html#a5bcb573b11b780148f1ff3e7f5961997">norm</a>();               <span class="comment">// ~25 flops</span>
<a name="l00142"></a>00142     <a class="code" href="ExceptionMacros_8h.html#ab71559e3ecec1319c37bf36c9091f23a">SimTK_ERRCHK</a>(dsdu &gt;= getDefaultTol&lt;RealP&gt;(), 
<a name="l00143"></a>00143         <span class="stringliteral">&quot;Geo::calcUnitTangent()&quot;</span>, <span class="stringliteral">&quot;Unit tangent undefined at a cusp.&quot;</span>);
<a name="l00144"></a>00144 
<a name="l00145"></a>00145     <span class="keywordflow">return</span> <a class="code" href="classSimTK_1_1UnitVec.html" title="This class is a Vec3 plus an ironclad guarantee either that:">UnitVec&lt;RealP,1&gt;</a>(Pu/dsdu, <span class="keyword">true</span>);     <span class="comment">// ~13 flops</span>
<a name="l00146"></a>00146 }
<a name="l00147"></a>00147 
<a name="l00170"></a>00170 <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP, <span class="keywordtype">int</span> S&gt; <span class="keyword">static</span> <a class="code" href="classSimTK_1_1Vec.html">Vec&lt;3,RealP&gt;</a> 
<a name="l00171"></a><a class="code" href="classSimTK_1_1Geo.html#a0cc3486aecf214573b6273bcbbc13135">00171</a> <a class="code" href="classSimTK_1_1Geo.html#a0cc3486aecf214573b6273bcbbc13135" title="Return the curvature vector c=dt/ds=d2P/ds2, given Pu=dP/du and Puu=d2P/du2.">calcCurvatureVector</a>(<span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Pu, <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Puu) {
<a name="l00172"></a>00172     <span class="keyword">const</span> RealP Pu2 = Pu.<a class="code" href="classSimTK_1_1Vec.html#a95575b22850f63eaa64858660c8c8c64">normSqr</a>();                 <span class="comment">// (ds/du)^2, 5 flops</span>
<a name="l00173"></a>00173     <a class="code" href="ExceptionMacros_8h.html#ab71559e3ecec1319c37bf36c9091f23a">SimTK_ERRCHK</a>(Pu2 &gt;= getDefaultTolSqr&lt;RealP&gt;(), 
<a name="l00174"></a>00174         <span class="stringliteral">&quot;Geo::calcCurvatureVector()&quot;</span>, <span class="stringliteral">&quot;Curvature undefined at a cusp.&quot;</span>);
<a name="l00175"></a>00175     <span class="keyword">const</span> RealP PuPuu     = <a class="code" href="namespaceSimTK.html#aeecdb84ae3713aa35d307a67e50890d6">dot</a>(Pu,Puu);
<a name="l00176"></a>00176     <span class="keyword">const</span> RealP uPrimeSqr = 1/Pu2;                          <span class="comment">// ~10 flops</span>
<a name="l00177"></a>00177     <span class="keyword">const</span> RealP u2Prime   = -PuPuu * <a class="code" href="group__square.html#gac143407eb9f50070a3c4d5515eb5c965">square</a>(uPrimeSqr);     <span class="comment">//   8 flops</span>
<a name="l00178"></a>00178     <span class="keywordflow">return</span> uPrimeSqr*Puu + u2Prime*Pu;                      <span class="comment">//   9 flops</span>
<a name="l00179"></a>00179 }
<a name="l00180"></a>00180 
<a name="l00191"></a>00191 <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP, <span class="keywordtype">int</span> S&gt; <span class="keyword">static</span> <a class="code" href="classSimTK_1_1UnitVec.html" title="This class is a Vec3 plus an ironclad guarantee either that:">UnitVec&lt;RealP,1&gt;</a> 
<a name="l00192"></a><a class="code" href="classSimTK_1_1Geo.html#a91f2d03400710d64e9102acb4713dc59">00192</a> <a class="code" href="classSimTK_1_1Geo.html#a91f2d03400710d64e9102acb4713dc59" title="In our definition, the unit normal vector n points in the &quot;outward&quot; direction, that is...">calcUnitNormal</a>(<span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Pu, <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Puu) {
<a name="l00193"></a>00193     <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1UnitVec.html" title="This class is a Vec3 plus an ironclad guarantee either that:">UnitVec&lt;RealP,1&gt;</a> UnitVec3P;
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     <span class="keyword">const</span> RealP Pu2 = Pu.<a class="code" href="classSimTK_1_1Vec.html#a95575b22850f63eaa64858660c8c8c64">normSqr</a>();                 <span class="comment">// (ds/du)^2, 5 flops</span>
<a name="l00196"></a>00196     <a class="code" href="ExceptionMacros_8h.html#ab71559e3ecec1319c37bf36c9091f23a">SimTK_ERRCHK</a>(Pu2 &gt;= getDefaultTolSqr&lt;RealP&gt;(), 
<a name="l00197"></a>00197         <span class="stringliteral">&quot;Geo::calcUnitNormal()&quot;</span>, <span class="stringliteral">&quot;The normal is undefined at a cusp.&quot;</span>);
<a name="l00198"></a>00198 
<a name="l00199"></a>00199     <span class="comment">// Now check if we&#39;re at an inflection point, meaning |Pu X Puu|==0.</span>
<a name="l00200"></a>00200     <span class="comment">// Use this handy identity from Struik eq. 3-9 to avoid calculating</span>
<a name="l00201"></a>00201     <span class="comment">// the cross product: (Pu X Puu)^2 = Pu^2Puu^2 - (~Pu*Puu)^2</span>
<a name="l00202"></a>00202     <span class="keyword">const</span> RealP Puu2 = Puu.<a class="code" href="classSimTK_1_1Vec.html#a95575b22850f63eaa64858660c8c8c64">normSqr</a>();                   <span class="comment">// 5 flops</span>
<a name="l00203"></a>00203     <span class="keyword">const</span> RealP PuPuu = <a class="code" href="namespaceSimTK.html#aeecdb84ae3713aa35d307a67e50890d6">dot</a>(Pu,Puu);                    <span class="comment">// 5 flops</span>
<a name="l00204"></a>00204     <span class="keyword">const</span> RealP PuXPuu2 = Pu2*Puu2 - <a class="code" href="group__square.html#gac143407eb9f50070a3c4d5515eb5c965">square</a>(PuPuu);     <span class="comment">// 3 flops</span>
<a name="l00205"></a>00205     <span class="keywordflow">if</span> (PuXPuu2 &lt; getDefaultTolSqr&lt;RealP&gt;())            <span class="comment">// 1 flop</span>
<a name="l00206"></a>00206         <span class="keywordflow">return</span> UnitVec3P(Pu).perp();
<a name="l00207"></a>00207     <span class="comment">// Calculate the curvature vector, negate, and normalize.</span>
<a name="l00208"></a>00208     <span class="keyword">const</span> RealP uPrimeSqr = 1/Pu2;                      <span class="comment">// ~10 flops</span>
<a name="l00209"></a>00209     <span class="keyword">const</span> RealP u2Prime   = -PuPuu * <a class="code" href="group__square.html#gac143407eb9f50070a3c4d5515eb5c965">square</a>(uPrimeSqr); <span class="comment">//   3 flops</span>
<a name="l00210"></a>00210     <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html">Vec&lt;3,RealP&gt;</a> c = uPrimeSqr*Puu + u2Prime*Pu;  <span class="comment">//   9 flops</span>
<a name="l00211"></a>00211     <span class="keywordflow">return</span> UnitVec3P(-c);                               <span class="comment">// ~40 flops</span>
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 
<a name="l00223"></a>00223 <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP, <span class="keywordtype">int</span> S&gt; <span class="keyword">static</span> RealP 
<a name="l00224"></a><a class="code" href="classSimTK_1_1Geo.html#a9b61d69fd82244346c7635e3f9c76db4">00224</a> calcCurveFrame(<span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp;    P, 
<a name="l00225"></a>00225                <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp;    Pu, 
<a name="l00226"></a>00226                <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp;    Puu,
<a name="l00227"></a>00227                <a class="code" href="classSimTK_1_1Transform__.html" title="This class represents the rotate-and-shift transform which gives the location and orientation of a ne...">Transform_&lt;RealP&gt;</a>&amp;       X_FP) {
<a name="l00228"></a>00228     <span class="keyword">typedef</span> <a class="code" href="classSimTK_1_1UnitVec.html" title="This class is a Vec3 plus an ironclad guarantee either that:">UnitVec&lt;RealP,1&gt;</a> UnitVec3P;
<a name="l00229"></a>00229 
<a name="l00230"></a>00230     <span class="keyword">const</span> RealP Pu2 = Pu.<a class="code" href="classSimTK_1_1Vec.html#a95575b22850f63eaa64858660c8c8c64">normSqr</a>();                 <span class="comment">// (ds/du)^2, 5 flops</span>
<a name="l00231"></a>00231     <a class="code" href="ExceptionMacros_8h.html#ab71559e3ecec1319c37bf36c9091f23a">SimTK_ERRCHK</a>(Pu2 &gt;= getDefaultTolSqr&lt;RealP&gt;(), 
<a name="l00232"></a>00232         <span class="stringliteral">&quot;Geo::calcCurveFrame()&quot;</span>, <span class="stringliteral">&quot;Curve frame is undefined at a cusp.&quot;</span>);
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="comment">// Set the point P(u) as the frame origin.</span>
<a name="l00235"></a>00235     X_FP.<a class="code" href="classSimTK_1_1Transform__.html#adc620dd92c973510862ca3dc1ed2d4a2" title="Return a writable (lvalue) reference to our translation vector p_BF.">updP</a>() = P;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237     <span class="comment">// Calculate the unit tangent t, our y axis.</span>
<a name="l00238"></a>00238     <span class="keyword">const</span> RealP uPrimeSqr = 1/Pu2;                          <span class="comment">// ~10 flops</span>
<a name="l00239"></a>00239     <span class="keyword">const</span> RealP uPrime    = std::sqrt(uPrimeSqr);           <span class="comment">// ~20 flops</span>
<a name="l00240"></a>00240     <span class="keyword">const</span> UnitVec3P t(uPrime*Pu, <span class="keyword">true</span>);                     <span class="comment">//   3 flops </span>
<a name="l00241"></a>00241 
<a name="l00242"></a>00242     <span class="comment">// Next calculate unit normal n, our x axis. See calcUnitNormal() above</span>
<a name="l00243"></a>00243     <span class="comment">// for theory.</span>
<a name="l00244"></a>00244     <span class="keyword">const</span> RealP Puu2 = Puu.<a class="code" href="classSimTK_1_1Vec.html#a95575b22850f63eaa64858660c8c8c64">normSqr</a>();                       <span class="comment">// 5 flops</span>
<a name="l00245"></a>00245     <span class="keyword">const</span> RealP PuPuu = <a class="code" href="namespaceSimTK.html#aeecdb84ae3713aa35d307a67e50890d6">dot</a>(Pu,Puu);                        <span class="comment">// 5 flops</span>
<a name="l00246"></a>00246     <span class="keyword">const</span> RealP PuXPuu2 = Pu2*Puu2 - <a class="code" href="group__square.html#gac143407eb9f50070a3c4d5515eb5c965">square</a>(PuPuu);         <span class="comment">// 3 flops</span>
<a name="l00247"></a>00247     UnitVec3P n; <span class="comment">// unit normal</span>
<a name="l00248"></a>00248     RealP     k; <span class="comment">// curvature magnitude</span>
<a name="l00249"></a>00249     <span class="keywordflow">if</span> (PuXPuu2 &lt; getDefaultTolSqr&lt;RealP&gt;()) {              <span class="comment">// 1 flop</span>
<a name="l00250"></a>00250         k = 0;
<a name="l00251"></a>00251         n = t.perp(); <span class="comment">// arbitrary</span>
<a name="l00252"></a>00252     } <span class="keywordflow">else</span> {
<a name="l00253"></a>00253         <span class="comment">// Calculate the curvature vector, negate, and normalize.</span>
<a name="l00254"></a>00254         <span class="keyword">const</span> RealP u2Prime = -PuPuu * <a class="code" href="group__square.html#gac143407eb9f50070a3c4d5515eb5c965">square</a>(uPrimeSqr);   <span class="comment">//   8 flops</span>
<a name="l00255"></a>00255         <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html">Vec&lt;3,RealP&gt;</a> c = uPrimeSqr*Puu + u2Prime*Pu;  <span class="comment">//   9 flops</span>
<a name="l00256"></a>00256         k = c.<a class="code" href="classSimTK_1_1Vec.html#a5bcb573b11b780148f1ff3e7f5961997">norm</a>();                       <span class="comment">// curvature &gt;= 0, ~25 flops</span>
<a name="l00257"></a>00257         n = UnitVec3P((-1/k)*c, <span class="keyword">true</span>);                      <span class="comment">// ~13 flops</span>
<a name="l00258"></a>00258     }
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     <span class="comment">// Finally calculate the binormal, our z axis. No need to normalize</span>
<a name="l00261"></a>00261     <span class="comment">// here because n and t are perpendicular unit vectors.</span>
<a name="l00262"></a>00262     <span class="keyword">const</span> UnitVec3P b(n % t, <span class="keyword">true</span>);                      <span class="comment">// 9 flops</span>
<a name="l00263"></a>00263 
<a name="l00264"></a>00264     <span class="comment">// Construct the coordinate frame without normalizing.</span>
<a name="l00265"></a>00265     X_FP.<a class="code" href="classSimTK_1_1Transform__.html#a1c0dfb4616800cb27dbff93494f74a96" title="Return a writable (lvalue) reference to the contained rotation R_BF.">updR</a>().setRotationFromUnitVecsTrustMe(n,t,b);
<a name="l00266"></a>00266 
<a name="l00267"></a>00267     <span class="keywordflow">return</span> k;
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00282"></a>00282 <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP, <span class="keywordtype">int</span> S&gt; <span class="keyword">static</span> RealP
<a name="l00283"></a><a class="code" href="classSimTK_1_1Geo.html#a81a6e6a58f0b5a6db434a316754bb7a8">00283</a> <a class="code" href="classSimTK_1_1Geo.html#a81a6e6a58f0b5a6db434a316754bb7a8" title="Return k^2, the square of the scalar curvature k, given Pu=dP/du and Puu=d2P/du2.">calcCurvatureSqr</a>(<span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Pu, <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Puu) {
<a name="l00284"></a>00284     <span class="keyword">const</span> RealP Pu2 = Pu.<a class="code" href="classSimTK_1_1Vec.html#a95575b22850f63eaa64858660c8c8c64">normSqr</a>();   <span class="comment">// (ds/du)^2, 5 flops</span>
<a name="l00285"></a>00285     <a class="code" href="ExceptionMacros_8h.html#ab71559e3ecec1319c37bf36c9091f23a">SimTK_ERRCHK</a>(Pu2 &gt;= getDefaultTolSqr&lt;RealP&gt;(), 
<a name="l00286"></a>00286         <span class="stringliteral">&quot;Geo::calcCurvatureSqr()&quot;</span>, <span class="stringliteral">&quot;Curvature is undefined at a cusp.&quot;</span>);
<a name="l00287"></a>00287     <span class="keyword">const</span> RealP num = <a class="code" href="namespaceSimTK.html#ae756378c84d8ec677106a9b0870d5c4d">cross</a>(Pu,Puu).normSqr();      <span class="comment">//  14 flops</span>
<a name="l00288"></a>00288     <span class="keyword">const</span> RealP den = <a class="code" href="group__cube.html#gafa5cf370fddde320439c9e579f2e69c0">cube</a>(Pu2);                    <span class="comment">//   2 flops</span>
<a name="l00289"></a>00289     <span class="keywordflow">return</span> num/den;                                 <span class="comment">// ~10 flops</span>
<a name="l00290"></a>00290 }
<a name="l00291"></a>00291 
<a name="l00305"></a>00305 <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP, <span class="keywordtype">int</span> S&gt; <span class="keyword">static</span> RealP
<a name="l00306"></a><a class="code" href="classSimTK_1_1Geo.html#abebb31a8e7e26b191ce5eb347e6c4084">00306</a> calcTorsion(<span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Pu, <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Puu, 
<a name="l00307"></a>00307             <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html" title="This is a fixed length column vector designed for no-overhead inline computation.">Vec&lt;3,RealP,S&gt;</a>&amp; Puuu) {
<a name="l00308"></a>00308     <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html">Vec&lt;3,RealP&gt;</a> PuXPuu = <a class="code" href="namespaceSimTK.html#ae756378c84d8ec677106a9b0870d5c4d">cross</a>(Pu,Puu);              <span class="comment">//   9 flops</span>
<a name="l00309"></a>00309     <span class="keyword">const</span> RealP PuXPuu2 = PuXPuu.<a class="code" href="classSimTK_1_1Vec.html#a95575b22850f63eaa64858660c8c8c64">normSqr</a>();                 <span class="comment">//   5 flops  </span>
<a name="l00310"></a>00310     <a class="code" href="ExceptionMacros_8h.html#ab71559e3ecec1319c37bf36c9091f23a">SimTK_ERRCHK</a>(PuXPuu2 &gt;= getDefaultTolSqr&lt;RealP&gt;(), <span class="stringliteral">&quot;Geo::calcTorsion()&quot;</span>, 
<a name="l00311"></a>00311         <span class="stringliteral">&quot;Torsion is undefined at a cusp or inflection point.&quot;</span>);
<a name="l00312"></a>00312     <span class="keyword">const</span> RealP num = <a class="code" href="namespaceSimTK.html#aeecdb84ae3713aa35d307a67e50890d6">dot</a>(PuXPuu, Puuu);                    <span class="comment">//   5 flops</span>
<a name="l00313"></a>00313     <span class="keywordflow">return</span> num/PuXPuu2;                                     <span class="comment">// ~10 flops</span>
<a name="l00314"></a>00314 }
<a name="l00338"></a>00338 <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP&gt; <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00339"></a>00339 findClosestPointsOfTwoLines
<a name="l00340"></a><a class="code" href="classSimTK_1_1Geo.html#ac66bd601e9192205f63c017b24db894e">00340</a>    (<span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html">Vec&lt;3,RealP&gt;</a>&amp; p0, <span class="keyword">const</span> <a class="code" href="classSimTK_1_1UnitVec.html" title="This class is a Vec3 plus an ironclad guarantee either that:">UnitVec&lt;RealP,1&gt;</a>&amp; d0,
<a name="l00341"></a>00341     <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html">Vec&lt;3,RealP&gt;</a>&amp; p1, <span class="keyword">const</span> <a class="code" href="classSimTK_1_1UnitVec.html" title="This class is a Vec3 plus an ironclad guarantee either that:">UnitVec&lt;RealP,1&gt;</a>&amp; d1,
<a name="l00342"></a>00342     <a class="code" href="classSimTK_1_1Vec.html">Vec&lt;3,RealP&gt;</a>&amp; x0, <a class="code" href="classSimTK_1_1Vec.html">Vec&lt;3,RealP&gt;</a>&amp; x1, <span class="keywordtype">bool</span>&amp; linesAreParallel)
<a name="l00343"></a>00343 {
<a name="l00344"></a>00344     <span class="keyword">const</span> <a class="code" href="classSimTK_1_1Vec.html">Vec&lt;3,RealP&gt;</a> w = p1-p0; <span class="comment">// vector from p0 to p1; 3 flops</span>
<a name="l00345"></a>00345     <span class="keyword">const</span> RealP s2Theta = (d0 % d1).normSqr(); <span class="comment">// sin^2(angle); 14 flops</span>
<a name="l00346"></a>00346     <span class="keyword">const</span> RealP d =  <a class="code" href="namespaceSimTK.html#aeecdb84ae3713aa35d307a67e50890d6">dot</a>(w,d0);     <span class="comment">// 5 flops</span>
<a name="l00347"></a>00347     <span class="keyword">const</span> RealP e = -<a class="code" href="namespaceSimTK.html#aeecdb84ae3713aa35d307a67e50890d6">dot</a>(w,d1);     <span class="comment">// 6 flops</span>
<a name="l00348"></a>00348 
<a name="l00349"></a>00349     RealP t0, t1; <span class="comment">// line parameters of closest points</span>
<a name="l00350"></a>00350     <span class="keywordflow">if</span> (s2Theta &lt; <a class="code" href="group__square.html#gac143407eb9f50070a3c4d5515eb5c965">square</a>(<a class="code" href="classSimTK_1_1NTraits.html">NTraits&lt;RealP&gt;::getSignificant</a>())) { <span class="comment">// 3 flops</span>
<a name="l00351"></a>00351         <span class="comment">// Lines are parallel. Return a point on each line midway between</span>
<a name="l00352"></a>00352         <span class="comment">// the origin points.</span>
<a name="l00353"></a>00353         linesAreParallel = <span class="keyword">true</span>; <span class="comment">// parallel</span>
<a name="l00354"></a>00354         t0 = d/2; t1 = e/2;      <span class="comment">// 2 flops</span>
<a name="l00355"></a>00355     } <span class="keywordflow">else</span> {
<a name="l00356"></a>00356         linesAreParallel = <span class="keyword">false</span>;
<a name="l00357"></a>00357         <span class="keyword">const</span> RealP cTheta = <a class="code" href="namespaceSimTK.html#aeecdb84ae3713aa35d307a67e50890d6">dot</a>(d0,d1); <span class="comment">// cos(angle between lines); 5 flops</span>
<a name="l00358"></a>00358         <span class="keyword">const</span> RealP oos2Theta = 1/s2Theta; <span class="comment">// about 10 flops</span>
<a name="l00359"></a>00359         t0 = (e*cTheta + d) * oos2Theta;   <span class="comment">// 3 flops</span>
<a name="l00360"></a>00360         t1 = (d*cTheta + e) * oos2Theta;   <span class="comment">// 3 flops</span>
<a name="l00361"></a>00361     }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363     x0 = p0 + t0*d0;    <span class="comment">// 6 flops</span>
<a name="l00364"></a>00364     x1 = p1 + t1*d1;    <span class="comment">// 6 flops</span>
<a name="l00365"></a>00365 }
<a name="l00366"></a>00366 
<a name="l00376"></a><a class="code" href="classSimTK_1_1Geo.html#a022a5f4a5fc4359d76d67256298a480b">00376</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP&gt; <span class="keyword">static</span> RealP getDefaultTol() 
<a name="l00377"></a>00377 {   <span class="keywordflow">return</span> <a class="code" href="classSimTK_1_1NTraits.html">NTraits&lt;RealP&gt;::getSignificant</a>(); }
<a name="l00380"></a><a class="code" href="classSimTK_1_1Geo.html#a507354aa72aa55e0291dd1e5e4f9ecd1">00380</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP&gt; <span class="keyword">static</span> RealP getDefaultTolSqr()
<a name="l00381"></a>00381 {   <span class="keywordflow">return</span> <a class="code" href="group__square.html#gac143407eb9f50070a3c4d5515eb5c965">square</a>(getDefaultTol&lt;RealP&gt;()); }
<a name="l00382"></a>00382 
<a name="l00385"></a><a class="code" href="classSimTK_1_1Geo.html#aabfd3feb89c1e154c24d13fa107bc555">00385</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP&gt; <span class="keyword">static</span> RealP getEps() 
<a name="l00386"></a>00386 {   <span class="keywordflow">return</span> <a class="code" href="classSimTK_1_1NTraits.html">NTraits&lt;RealP&gt;::getEps</a>(); }
<a name="l00388"></a><a class="code" href="classSimTK_1_1Geo.html#a70ae991b9c9f96c2a3b9079fb47c6cf0">00388</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP&gt; <span class="keyword">static</span> RealP getNaN() 
<a name="l00389"></a>00389 {   <span class="keywordflow">return</span> <a class="code" href="classSimTK_1_1NTraits.html">NTraits&lt;RealP&gt;::getNaN</a>(); }
<a name="l00391"></a><a class="code" href="classSimTK_1_1Geo.html#ab0bfe21f900995cceff6c34df9d2a69a">00391</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP&gt; <span class="keyword">static</span> RealP getInfinity() 
<a name="l00392"></a>00392 {   <span class="keywordflow">return</span> <a class="code" href="classSimTK_1_1NTraits.html">NTraits&lt;RealP&gt;::getInfinity</a>(); }
<a name="l00393"></a>00393 
<a name="l00398"></a><a class="code" href="classSimTK_1_1Geo.html#abfc604542773ad90bbbb49c2143a98b7">00398</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP&gt; <span class="keyword">static</span> RealP <a class="code" href="classSimTK_1_1Geo.html#abfc604542773ad90bbbb49c2143a98b7" title="Stretch a dimension by a given tolerance amount.">stretchBy</a>(RealP length, RealP tol) {
<a name="l00399"></a>00399     <a class="code" href="ExceptionMacros_8h.html#a57ba111f3c249a666b141d802807daa1">SimTK_ERRCHK2</a>(tol &gt;= getEps&lt;RealP&gt;(), <span class="stringliteral">&quot;Geo::stretchBy()&quot;</span>,
<a name="l00400"></a>00400         <span class="stringliteral">&quot;The supplied tolerance %g is too small; must be at least %g&quot;</span>
<a name="l00401"></a>00401         <span class="stringliteral">&quot; for significance at this precision.&quot;</span>, 
<a name="l00402"></a>00402         (<span class="keywordtype">double</span>)tol, (<span class="keywordtype">double</span>)getEps&lt;RealP&gt;());
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     <span class="keywordflow">return</span> length + <a class="code" href="namespaceSimTK.html#a5e54f17d86aeb08126d641bea4ba6f86">std::max</a>(length*tol, tol);
<a name="l00405"></a>00405 }
<a name="l00406"></a>00406 
<a name="l00409"></a><a class="code" href="classSimTK_1_1Geo.html#a01ba9676fd826d03453f7f0253a1b6f9">00409</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> RealP&gt; <span class="keyword">static</span> RealP stretch(RealP length)
<a name="l00410"></a>00410 {   <span class="keywordflow">return</span> stretchBy(length, getDefaultTol&lt;RealP&gt;()); }
<a name="l00411"></a>00411 
<a name="l00414"></a>00414 };
<a name="l00415"></a>00415 
<a name="l00416"></a>00416 
<a name="l00417"></a>00417 } <span class="comment">// namespace SimTK</span>
<a name="l00418"></a>00418 
<a name="l00419"></a>00419 <span class="preprocessor">#endif // SimTK_SIMMATH_GEO_H_</span>
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="Geo_8h.html">Geo.h</a>      </li>

    <li class="footer">Generated on Mon Jul 14 2014 23:25:45 for Simbody by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
