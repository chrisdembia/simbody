<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Simbody: SimTK::ParallelWorkQueue Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simbody
   &#160;<span id="projectnumber">3.4 (development)</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classSimTK_1_1ParallelWorkQueue.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">SimTK::ParallelWorkQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="SimTK::ParallelWorkQueue" --><!-- doxytag: inherits="PIMPLHandle&lt; ParallelWorkQueue, ParallelWorkQueueImpl &gt;" -->
<p>This class is used for performing multithreaded computations. It maintains a queue of tasks to be executed, and a pool of threads for executing them.  
 <a href="classSimTK_1_1ParallelWorkQueue.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ParallelWorkQueue_8h_source.html">ParallelWorkQueue.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for SimTK::ParallelWorkQueue:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classSimTK_1_1ParallelWorkQueue.png" usemap="#SimTK::ParallelWorkQueue_map" alt=""/>
  <map id="SimTK::ParallelWorkQueue_map" name="SimTK::ParallelWorkQueue_map">
<area href="classSimTK_1_1PIMPLHandle.html" alt="SimTK::PIMPLHandle&lt; ParallelWorkQueue, ParallelWorkQueueImpl &gt;" shape="rect" coords="0,0,405,24"/>
</map>
 </div></div>

<p><a href="classSimTK_1_1ParallelWorkQueue-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSimTK_1_1ParallelWorkQueue_1_1Task.html">Task</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Concrete subclasses of this abstract class represent tasks that can be executed by a <a class="el" href="classSimTK_1_1ParallelWorkQueue.html" title="This class is used for performing multithreaded computations. It maintains a queue of tasks to be exe...">ParallelWorkQueue</a>.  <a href="classSimTK_1_1ParallelWorkQueue_1_1Task.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSimTK_1_1ParallelWorkQueue.html#a6080b84676cac510f944f108a51d32cb">ParallelWorkQueue</a> (int queueSize, int numThreads=<a class="el" href="classSimTK_1_1ParallelExecutor.html#a1b472a424c6261b2302cc90b2f45b233">ParallelExecutor::getNumProcessors</a>())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classSimTK_1_1ParallelWorkQueue.html" title="This class is used for performing multithreaded computations. It maintains a queue of tasks to be exe...">ParallelWorkQueue</a>.  <a href="#a6080b84676cac510f944f108a51d32cb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSimTK_1_1ParallelWorkQueue.html#af53ee4143a8c16e42ba3e434cefecdd8">addTask</a> (<a class="el" href="classSimTK_1_1ParallelWorkQueue_1_1Task.html">Task</a> *task)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a <a class="el" href="classSimTK_1_1ParallelWorkQueue_1_1Task.html" title="Concrete subclasses of this abstract class represent tasks that can be executed by a ParallelWorkQueu...">Task</a> to the queue.  <a href="#af53ee4143a8c16e42ba3e434cefecdd8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSimTK_1_1ParallelWorkQueue.html#ab54d5f787b9e1e9aa4afae49a824f5c9">flush</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Block until all Tasks that have been added to the queue finish executing.  <a href="#ab54d5f787b9e1e9aa4afae49a824f5c9"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class is used for performing multithreaded computations. It maintains a queue of tasks to be executed, and a pool of threads for executing them. </p>
<p>To use it, define one or more subclasses of <a class="el" href="classSimTK_1_1ParallelWorkQueue_1_1Task.html" title="Concrete subclasses of this abstract class represent tasks that can be executed by a ParallelWorkQueu...">ParallelWorkQueue::Task</a> that performs computations. Then create a <a class="el" href="classSimTK_1_1ParallelWorkQueue.html" title="This class is used for performing multithreaded computations. It maintains a queue of tasks to be exe...">ParallelWorkQueue</a> and add Tasks to it:</p>
<pre>
 <a class="el" href="classSimTK_1_1ParallelWorkQueue.html" title="This class is used for performing multithreaded computations. It maintains a queue of tasks to be exe...">ParallelWorkQueue</a> queue(20);
 queue.addTask(new MyTask());
 </pre><p>Each <a class="el" href="classSimTK_1_1ParallelWorkQueue_1_1Task.html" title="Concrete subclasses of this abstract class represent tasks that can be executed by a ParallelWorkQueu...">Task</a>'s execute() method will be called, and then the <a class="el" href="classSimTK_1_1ParallelWorkQueue_1_1Task.html" title="Concrete subclasses of this abstract class represent tasks that can be executed by a ParallelWorkQueu...">Task</a> will be deleted. The invocations are done in parallel on multiple threads, so you cannot make any assumptions about what order they will occur in or which ones will happen at the same time.</p>
<p>The threads are created in the <a class="el" href="classSimTK_1_1ParallelWorkQueue.html" title="This class is used for performing multithreaded computations. It maintains a queue of tasks to be exe...">ParallelWorkQueue</a>'s constructor and remain active until it is deleted. This means that creating a <a class="el" href="classSimTK_1_1ParallelWorkQueue.html" title="This class is used for performing multithreaded computations. It maintains a queue of tasks to be exe...">ParallelWorkQueue</a> is a somewhat expensive operation, but it may then be used repeatedly for executing various calculations. By default, the number of threads is chosen to be equal to the number of available processor cores. You can optionally specify a different number of threads to create. For example, using more threads than processors can sometimes lead to better processor utilitization. Alternatively, if only four Tasks will be executed, you might specify min(4, <a class="el" href="classSimTK_1_1ParallelExecutor.html#a1b472a424c6261b2302cc90b2f45b233" title="Get the number of available processor cores.">ParallelExecutor::getNumProcessors()</a>) to avoid creating extra threads that will never have any work to do. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6080b84676cac510f944f108a51d32cb"></a><!-- doxytag: member="SimTK::ParallelWorkQueue::ParallelWorkQueue" ref="a6080b84676cac510f944f108a51d32cb" args="(int queueSize, int numThreads=ParallelExecutor::getNumProcessors())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSimTK_1_1ParallelWorkQueue.html#a6080b84676cac510f944f108a51d32cb">SimTK::ParallelWorkQueue::ParallelWorkQueue</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>queueSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numThreads</em> = <code><a class="el" href="classSimTK_1_1ParallelExecutor.html#a1b472a424c6261b2302cc90b2f45b233">ParallelExecutor::getNumProcessors</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Construct a <a class="el" href="classSimTK_1_1ParallelWorkQueue.html" title="This class is used for performing multithreaded computations. It maintains a queue of tasks to be exe...">ParallelWorkQueue</a>. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">queueSize</td><td>the maximum number of Tasks that can be in the queue waiting to start executing at any time </td></tr>
    <tr><td class="paramname">numThreads</td><td>the number of threads to create. By default, this is set equal to the number of processors. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af53ee4143a8c16e42ba3e434cefecdd8"></a><!-- doxytag: member="SimTK::ParallelWorkQueue::addTask" ref="af53ee4143a8c16e42ba3e434cefecdd8" args="(Task *task)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classSimTK_1_1ParallelWorkQueue.html#af53ee4143a8c16e42ba3e434cefecdd8">SimTK::ParallelWorkQueue::addTask</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSimTK_1_1ParallelWorkQueue_1_1Task.html">Task</a> *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a <a class="el" href="classSimTK_1_1ParallelWorkQueue_1_1Task.html" title="Concrete subclasses of this abstract class represent tasks that can be executed by a ParallelWorkQueu...">Task</a> to the queue. </p>
<p>If the queue is currently full, this method will block until space is freed up in the queue by the worker threads. The queue assumes ownership of the <a class="el" href="classSimTK_1_1ParallelWorkQueue_1_1Task.html" title="Concrete subclasses of this abstract class represent tasks that can be executed by a ParallelWorkQueu...">Task</a> object and deletes it once it has finished executing.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>the <a class="el" href="classSimTK_1_1ParallelWorkQueue_1_1Task.html" title="Concrete subclasses of this abstract class represent tasks that can be executed by a ParallelWorkQueu...">Task</a> to add to the queue </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab54d5f787b9e1e9aa4afae49a824f5c9"></a><!-- doxytag: member="SimTK::ParallelWorkQueue::flush" ref="ab54d5f787b9e1e9aa4afae49a824f5c9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classSimTK_1_1ParallelWorkQueue.html#ab54d5f787b9e1e9aa4afae49a824f5c9">SimTK::ParallelWorkQueue::flush</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Block until all Tasks that have been added to the queue finish executing. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ParallelWorkQueue_8h_source.html">ParallelWorkQueue.h</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceSimTK.html">SimTK</a>      </li>
      <li class="navelem"><a class="el" href="classSimTK_1_1ParallelWorkQueue.html">ParallelWorkQueue</a>      </li>

    <li class="footer">Generated on Wed Oct 9 2013 08:38:58 for Simbody by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
